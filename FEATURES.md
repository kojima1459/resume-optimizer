# 実装済み機能ドキュメント

## 概要

AI職務経歴書最適化メイカーは、AI を活用して職務経歴書を求人情報に最適化するツールです。以下は実装済みの全機能です。

## コア機能

### 1. 職務経歴書の最適化生成

**説明**: ユーザーが入力した職務経歴書と求人情報を基に、AI が複数のパターンの最適化された職務経歴書を生成します。

**実装ファイル**:
- `server/routers.ts` - `resume.generateMultiple` procedure
- `server/evaluation.ts` - AI 評価ロジック
- `client/src/pages/Home.tsx` - UI

**機能詳細**:
- **入力**: 職務経歴書（テキスト/ファイルアップロード）、求人情報（テキスト/ファイルアップロード）
- **処理**: OpenAI、Gemini、Claude の API を使用して複数パターンを並列生成
- **出力**: 複数の最適化パターン（デフォルト3パターン、カスタマイズ可能）
- **評価**: 各パターンに対して AI が自動採点（0-100点）

**使用 API**:
- OpenAI GPT-4 / GPT-3.5
- Google Gemini
- Anthropic Claude

### 2. 複数パターン生成

**説明**: ユーザーが指定した数の異なるパターンの職務経歴書を生成します。

**実装ファイル**:
- `server/routers.ts` - `resume.generateMultiple` procedure
- `client/src/pages/Home.tsx` - パターン数設定UI

**機能詳細**:
- **パターン数**: 1-10 パターンを選択可能
- **並列処理**: 複数パターンを並列生成して高速化
- **評価**: 各パターンに対して自動採点
- **比較**: お気に入りページでパターン比較機能

**パフォーマンス**:
- 3 パターン生成: 約 30-45 秒
- 5 パターン生成: 約 50-70 秒
- 10 パターン生成: 約 100-150 秒

### 3. テンプレート機能

**説明**: システムテンプレートとユーザーカスタムテンプレートを使用して、職務経歴書の生成をガイドします。

**実装ファイル**:
- `server/db.ts` - テンプレート管理
- `client/src/pages/MyTemplates.tsx` - テンプレート管理UI
- `client/src/pages/Home.tsx` - テンプレート選択UI

**機能詳細**:
- **システムテンプレート**: 業界別・職種別の事前定義テンプレート
- **カスタムテンプレート**: ユーザーが独自テンプレートを作成・編集・削除
- **テンプレート管理**: テンプレートの一覧表示、作成、編集、削除

**テンプレート例**:
- IT エンジニア向けテンプレート
- 営業職向けテンプレート
- マネジメント職向けテンプレート
- 新卒向けテンプレート

### 4. 出力項目カスタマイズ

**説明**: ユーザーが生成される職務経歴書に含める項目をカスタマイズできます。

**実装ファイル**:
- `client/src/pages/Home.tsx` - 出力項目選択UI

**デフォルト出力項目**:
- Summary（職務経歴書）
- Career History（職務経歴）
- Motivation（志望動機）
- Self PR（自己 PR）
- Why This Company（なぜこの企業か）
- What to Achieve（達成したいこと）

**カスタム項目**:
- ユーザーが独自の項目を追加可能
- 項目名と文字数制限を指定

### 5. 文字数設定

**説明**: 各出力項目の文字数制限を設定できます。

**実装ファイル**:
- `client/src/pages/Home.tsx` - 文字数設定UI

**設定可能な項目**:
- Summary: 300-600 文字
- Career History: 400-800 文字
- Motivation: 300-500 文字
- Self PR: 300-500 文字
- Why This Company: 200-400 文字
- What to Achieve: 200-400 文字

### 6. AI 自動評価

**説明**: 生成された各パターンに対して、AI が自動的に評価スコアを付与します。

**実装ファイル**:
- `server/evaluation.ts` - 評価ロジック
- `client/src/pages/Home.tsx` - 評価結果表示UI

**評価項目**:
1. **求人との関連性** (Relevance to Job Posting): 0-100 点
2. **明確性** (Clarity): 0-100 点
3. **インパクト** (Impact): 0-100 点
4. **完全性** (Completeness): 0-100 点
5. **改善提案** (Improvement Suggestions): テキスト形式

**総合スコア**: 上記 4 項目の平均値（0-100 点）

### 7. お気に入り機能

**説明**: 生成されたパターンをお気に入りに保存し、後で比較・確認できます。

**実装ファイル**:
- `server/db.ts` - お気に入り管理
- `client/src/pages/Favorites.tsx` - お気に入りUI

**機能詳細**:
- パターンをお気に入りに追加/削除
- お気に入りパターンの一覧表示
- パターン比較（複数パターンを並べて表示）
- スコア表示
- 生成日時表示

### 8. 履歴管理

**説明**: ユーザーが生成した職務経歴書の履歴を保存・管理します。

**実装ファイル**:
- `server/db.ts` - 履歴管理
- `client/src/pages/Home.tsx` - 履歴UI

**機能詳細**:
- 生成履歴の自動保存
- 履歴からの復元
- 履歴の削除
- 最後の入力内容の自動復元

### 9. ファイルアップロード

**説明**: PDF/Word 形式の職務経歴書と求人情報をアップロードできます。

**実装ファイル**:
- `client/src/pages/Home.tsx` - ファイルアップロードUI
- `server/routers.ts` - ファイル処理

**対応形式**:
- PDF (.pdf)
- Word (.docx, .doc)
- テキスト (.txt)

**機能詳細**:
- ドラッグ&ドロップでのアップロード
- ファイルサイズ制限（10MB）
- OCR による PDF テキスト抽出（計画中）

### 10. エクスポート機能

**説明**: 生成された職務経歴書を複数の形式でエクスポートできます。

**実装ファイル**:
- `client/src/pages/Home.tsx` - エクスポートUI

**対応形式**:
- PDF (.pdf)
- Word (.docx)
- テキスト (.txt)
- Markdown (.md)

### 11. キーボードショートカット

**説明**: キーボードショートカットで素早く操作できます。

**実装ファイル**:
- `client/src/pages/Home.tsx` - ショートカット実装

**ショートカット一覧**:
- `Ctrl+Enter` / `Cmd+Enter`: 生成開始
- `Ctrl+C` / `Cmd+C`: 全項目をコピー
- `Ctrl+S` / `Cmd+S`: パターンを保存
- `Ctrl+H` / `Cmd+H`: ショートカットヘルプ表示

### 12. 多言語対応

**説明**: 日本語と英語に対応しており、言語を切り替えできます。

**実装ファイル**:
- `client/src/locales/ja.json` - 日本語翻訳
- `client/src/locales/en.json` - 英語翻訳
- `client/src/components/LanguageSwitcher.tsx` - 言語切り替えUI
- `client/src/_core/i18n.ts` - i18next 初期化

**対応言語**:
- 日本語 (ja)
- 英語 (en)

**翻訳ページ**:
- Home.tsx
- Guide.tsx
- Favorites.tsx
- ApiSettings.tsx
- Privacy.tsx
- Terms.tsx
- MyTemplates.tsx
- AnnouncementDialog.tsx
- Footer.tsx

### 13. ユーザー認証

**説明**: Manus OAuth を使用したユーザー認証機能です。

**実装ファイル**:
- `server/_core/context.ts` - 認証コンテキスト
- `server/_core/auth.ts` - 認証ロジック
- `client/src/_core/hooks/useAuth.ts` - 認証フック

**機能詳細**:
- Manus OAuth ログイン
- セッション管理
- ユーザープロフィール管理
- ログアウト

### 14. API キー管理

**説明**: OpenAI、Gemini、Claude の API キーを安全に管理します。

**実装ファイル**:
- `client/src/pages/ApiSettings.tsx` - API 設定UI
- `client/src/hooks/useApiKey.ts` - API キー管理フック

**機能詳細**:
- API キーをブラウザの localStorage に保存
- API キーの暗号化（計画中）
- API キーの検証
- API プロバイダーの切り替え

### 15. ガイドページ

**説明**: ツールの使い方やコツを説明するガイドページです。

**実装ファイル**:
- `client/src/pages/Guide.tsx` - ガイドUI

**コンテンツ**:
- 概要説明
- 基本機能の説明
- 高度な機能の説明
- 使い方ステップバイステップ
- Tips & FAQ

### 16. プライバシーポリシー

**説明**: ユーザーの個人情報の取り扱いについてのポリシーです。

**実装ファイル**:
- `client/src/pages/Privacy.tsx` - プライバシーポリシーUI

**内容**:
- 個人情報の収集
- 個人情報の利用目的
- 個人情報の保護
- 第三者への開示
- データ保持期間
- ユーザーの権利
- Cookie の使用
- ポリシーの変更
- お問い合わせ

### 17. 利用規約

**説明**: サービスの利用規約です。

**実装ファイル**:
- `client/src/pages/Terms.tsx` - 利用規約UI

**内容**:
- サービス概要
- ユーザー登録
- サービスの利用
- 知的財産権
- ユーザーの責任
- 責任制限
- 免責事項
- サービス終了
- 規約の変更
- 準拠法

## 計画中の機能

### 1. AI 面接対策（無料！）
**説明**: 生成された職務経歴書に基づいて、想定される面接質問と回答例を自動生成します。

**推定実装時間**: 10-15 時間
**優先度**: 高

### 2. AI 履歴書評価・スコアリング
**説明**: ユーザーの職務経歴書に対して、より詳細な評価とスコアを提供します。

**推定実装時間**: 8-12 時間
**優先度**: 高

### 3. バッチ一括応募機能
**説明**: 複数の企業に一括で応募できる機能です。

**推定実装時間**: 15-20 時間
**優先度**: 中

### 4. LinkedIn 人材検索機能
**説明**: LinkedIn から類似職務経歴を検索し、参考にできる機能です。

**推定実装時間**: 12-18 時間
**優先度**: 中

### 5. 求人情報の自動収集・マッチング
**説明**: Indeed、LinkedIn、Wantedly から求人情報を自動収集し、ユーザーの職務経歴書に最適な求人を提案します。

**推定実装時間**: 20-30 時間
**優先度**: 低

### 6. OCR 機能
**説明**: PDF/画像形式の職務経歴書から自動的にテキストを抽出します。

**推定実装時間**: 5-8 時間
**優先度**: 中

### 7. 中国語・韓国語対応
**説明**: 中国語（簡体字）と韓国語に対応します。

**推定実装時間**: 2-3 時間（言語あたり）
**優先度**: 低

## パフォーマンス最適化

### 1. 並列処理
- 複数パターンの生成を並列処理
- 複数 API の並列呼び出し

### 2. キャッシング
- 生成結果のキャッシング
- テンプレートのキャッシング

### 3. 遅延ロード
- ページコンポーネントの遅延ロード
- 画像の遅延ロード

### 4. コード分割
- Webpack による自動コード分割
- ルートベースのコード分割

## セキュリティ対策

### 1. 認証・認可
- Manus OAuth による安全なログイン
- セッション管理
- CSRF 対策

### 2. データ保護
- HTTPS による通信暗号化
- API キーの安全な保管（localStorage）
- ユーザーデータの暗号化（計画中）

### 3. 入力検証
- フロントエンド入力検証
- バックエンド入力検証
- XSS 対策

### 4. API セキュリティ
- API キーの検証
- レート制限
- エラーハンドリング

## テスト

### 1. ユニットテスト
- **ファイル**: `server/*.test.ts`
- **テスト数**: 39 個
- **テストフレームワーク**: Vitest

### 2. 統合テスト
- API エンドポイントのテスト
- データベース操作のテスト
- 認証フローのテスト

### 3. E2E テスト
- ユーザーフローのテスト
- ブラウザ互換性テスト
- レスポンシブデザインテスト

## 変更履歴

### v1.0.0 (2025-01-26)
- 初版リリース
- コア機能の実装完了
- 多言語対応（日本語・英語）
- AI 自動評価機能
- ユーザー認証機能
- テンプレート機能
- お気に入り機能
- 履歴管理機能
